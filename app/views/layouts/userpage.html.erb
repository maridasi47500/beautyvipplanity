<!DOCTYPE html><html id="facebook" class="_9dls" lang="fr" dir="ltr"><head>
<title>Ma page de profil</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>

<style>
  .marg1 {
      float:right;
      top:0;
    margin: 0 20px 0px 20px  ;
}
body {font-family: Arial, Helvetica, sans-serif;}

/* The Modal (background) */
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 5; /* Sit on top */
  padding-top: 100px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content */
.modal-content {
  background-color: #fefefe;
  margin: auto;
  padding: 20px;
  border: 1px solid #888;
  width: 80%;
}

/* The Close Button */
.close {
  color: #aaaaaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}
.mycontent {
    display:block;
    width:100%;
    font-size: 22px;
    height: 300px;
}
.mycontent-comment {
    overflow: hidden;
    resize: none; 
    
}
h3.mytitle {
    float:left;
    text-align:center;
    width:100%;
    display:block;
}
.myitems {
    width:100%;
    display:block;
    word-break: break-all;
}
.close:hover,
.close:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
  right:0;
}


.myelement:before {
    content: "\e080";
    font-family: 'Glyphicons Halflings';
    font-size: 9px;
    position: relative;
    margin-right: 10px;
    top: 3px;
    color: #ccc;
}
.btnpublication {
    display:block;
    width: 100%;
}
.btnreview {
    float:right;
    right:0;
}
.myamenity {
    padding: 0 3px 0 3px;
}
.mybtnreview {
    display:block;
    text-align:right;
    
}
.nav-item {
  padding: 0 30px 0 30px;
}
li.women,li.men,li.birthday,li.nobullet {
list-style-type: none;
    padding-left: 30px;

}
li.women::before,li.men::before,li.birthday::before,li.nobullet::before {

}
li.women {     background-repeat: no-repeat;
    line-height: 30px;
    padding-left: 30px;
    background-image: url(/assets/person.png);  } 
li.men { background-repeat: no-repeat;
    line-height: 30px;
    padding-left: 30px;
    background-image: url(/assets/person.png); } 
li.addtolist { background-repeat: no-repeat;
    line-height: 30px;
    padding-left: 30px;
    background-image: url(/assets/add.png); } 
li.birthday { background-repeat: no-repeat;
    line-height: 30px;
    padding-left: 30px;
    background-image: url(/assets/cake.png); } 
li.nobullet {list-style-type: none;}
li span {
  padding-left: 30px;
}
.attrname {
  padding-bottom: 10px;

  font-size:14px;
  color: #5b5b5b;
}
.photodeprofil {
    top:150px;
    left:50%;
      position: absolute;
  z-index: 3;
}
.photocontainer {
    align-content: center;
}
.btnchangeprofilephoto {
        top:150px;
    left:75%;
      position: absolute;
  z-index: 4;

}
.mypersoclass {
    cursor:pointer;
}
.postcommentphotodeprofil {
      top:150px;
    left:50%;
      position: revert;
  z-index: 3;

}
    .mycontainer{
        width: 200px;
        height: 200px;
        position: relative;
    }
    .box{
        width: 30px;
        height: 30px;            
        position: absolute;
        top: 0;
        right: 0;
        opacity: 0.8;  /* for demo purpose  */
        background-image: url("/assets/crayon.png");
        background-size: 100% 100%;
        filter: invert(1);
           background-repeat: no-repeat;
          border-radius: 75%;
    }
    .stack-top{
        z-index: 9;
        margin: 20px; /* for demo purpose  */
    }
    .box:hover {
              filter: invert(0.80);

    }

</style>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>

    </head><body class="_6s5d _71pn _-kb d-flex justify-content-center">
    <article class="my-3 w-50 " id="card">
      <ul class="bg-light bd-heading nav sticky-xl-top align-self-start mt-5 mb-3 mt-xl-0 mb-xl-2">
          <li class="nav-item"><h3 >Ma page de profil</h3></li>
          <li class="nav-item"><a class="d-flex align-items-center" href="<%=root_path%>">Home Page</a></li>
          <li class="nav-item"><p class=""><%=render current_user%></p></li>
          <li class="nav-item"><p class=""><%=link_to me_path do%>Ma page<%end%></p></li>
          <li class="nav-item"><p class=""><%=link_to 'Sign out', signout_path%></p></li>

      </ul>
          <div class="card  d-flex align-items-center">
                            <div class="card-header photocontainer">

              <%if current_user.bannerimage%>
              
              <img class="photobanner card-img-top" width="100%" height="250" src="<%=current_user.bannerimage%>" onerror="this.src='/assets/202105272225270200.png';" >
              <%else%>
              <svg class="photobanner bd-placeholder-img bd-placeholder-img-lg img-fluid" width="100%" height="250" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Photo de famille ou de milieu naturel" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#868e96"/><text x="50%" y="50%" fill="#dee2e6" dy=".3em">Photo de famille ou de milieu naturel</text></svg>
              <%end%>
              
                            <%if !current_user.imagepath%>

              <svg class="photodeprofil bd-placeholder-img bd-placeholder-img-lg img-fluid rounded-circle" width="100" height="100" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Portrait" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#868e96"/><text x="20%" y="50%" fill="#dee2e6" dy=".3em">Portrait</text></svg>
                <%else%>
                            <img src="<%=current_user.imagepath%>" onmouseenter="hoverppicenter(event);return false;" onmouseout="hoverppicout(event);return false;" onclick="myprofilephotos(event);return false;" onerror="this.src='/assets/men.png';" class="photodeprofil rounded-circle" width="100" height="100" id="myimage"/>

              <%end%>
                            <div class="btnchangeprofilephoto"><%=link_to "Changer la photo de paysage", "", class: "btn btn-secondary", onclick: "photos(event);return false;"%></div>
                            </div>
              <div class="card-body">
                <h5 class="card-title"><%=current_user.fullname%></h5>
                <p class="card-text addbio"><%=current_user.mybio%>
<%=link_to (current_user.mybio.length > 0 ? 'Ajouter une bio' : 'Editer ma bio'), addbio_path, onclick: "$.ajax({url: $(this).attr('href'),success: function(data){$('.addbio').html(data);}});return false;"%></p>
                
              </div>
              <div class="card-footer bg-transparent w-100 align-items-left">
<nav class="navbar navbar-expand-lg navbar-light bg-light ">
  <div class="container-fluid">
    <div class="collapse navbar-collapse " id="navbarNav">
      <ul class="navbar-nav ">
        <li class="nav-item">
          <a class="nav-link" href="<%=me_path%>">Publications</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="<%=infos_path(username: current_user.username)%>">A propos de vous</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="<%=photos1_path(username: current_user.username)%>">Mes photos</a>
        </li>
      </ul>
    </div>
  </div>
</nav>                  
              </div>            </div>

                <div class="bd-example">

             <%=yield%>  
            </div>

     

    </article>
        <div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content myformpost">
  </div>

</div>

<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
        <script>
          function navig(){
            var allels=document.getElementsByClassName('nav-link'),el;
            for (var i= 0;(i<allels.length);i++) {
  el = allels[i];
  console.log(new URL(el.href.split('?')[0]).pathname,window.location.pathname.split('?')[0]);
    if (window.location.pathname.split('?')[0].includes(new URL(el.href.split('?')[0]).pathname)) {
      
      el.parentElement.classList.add('active');
      
    }
  };
  }
</script>


<script>
  $(function(){
    navig();
      


  });

</script>

<script class="myjavascript">
      function myphotonow(e) {
                       
                  var formData = new FormData($('.myphotos')[0]);
                          event.preventDefault();
          $.ajax({processData: false,
            data:formData,
            contentType: false,url:$('.myphotos').attr('action'),type:'put',success:function(data){
              var myimagesrc=document.getElementsByClassName('myimage'+$('.myphotos').data('imageid'));
              console.log(myimagesrc,data);

               myimagesrc[0].src=data;
            },complete:function(){ $('.close').click();
        }            
});
        return false;
      }

    function mylandscapenow(e) {
                  var formData = new FormData($('.myphotos')[0]);
                          event.preventDefault();
          $.ajax({processData: false,
            data:formData,
            contentType: false,url:'<%=updatephoto_path(userid: (current_user ? current_user.id : @user.id))%>&id='+e.target.dataset.myphotoid+'&cancel=true&view=myphotos',type:'put',success:function(data){$('.photocontainer').html(data);
            },complete:function(){ $('.close').click();
 var images=document.getElementsByClassName('postcommentphotodeprofil');
        var myimagesrc=document.getElementsByClassName('photodeprofil')[0].src;
        for (var i = 0; i<images.length;i++) {
          console.log(images[i]);
          images[i].src = String(myimagesrc);
        }            
}});
        return false;
      }
        function photo(e) {
  on(e);
  $.ajax({url: "<%=myphoto_path%>?id="+e.target.dataset.id,type:'get',success: function(data) {$('.myformpost').html(data);
      //$("[data-myphotoid="+e.target.dataset.id+"]").click(mylandscapenow);
    }});
}
        function dlphoto(e) {
  on(e);
  $.ajax({url: "<%=dlmyphoto_path%>?id="+e.target.dataset.id,type:'get',success: function(data) {$('.myformpost').html(data);
      //$("[data-myphotoid="+e.target.dataset.id+"]").click(mylandscapenow);
    }});
}


// Get the modal
var modal = document.getElementById("myModal");

// Get the button that opens the modal

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];
  function hoverppicout(e) {
    $(e.target).removeClass('shadow-lg'); 
    $(e.target).removeClass('mypersoclass'); 
  }
  function hoverppicenter(e) {
    $(e.target).addClass('shadow-lg'); 
    $(e.target).addClass('mypersoclass'); 
  }

// When the user clicks the button, open the modal 
function on(e) {
  modal.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
function off(e) {
  modal.style.display = "none";
}
function photos(e) {
  on(e);
  $.ajax({url: "<%=myphotos_path%>",type:'get',success: function(data) {$('.myformpost').html(data);}});
}
function myprofilephotos(e) {
  on(e);
  $.ajax({
    url: "<%=myprofilephotos_path%>",
    success: function(data) {
      $('.myformpost').html(data);

    }
  });
  
}
// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}
function expandTextarea(e) {
    e.target.addEventListener('keyup', function() {
        this.style.overflow = 'hidden';
        this.style.height = 0;
        this.style.height = this.scrollHeight + 'px';
    }, false);
}
        function pressed(e) {
            // Has the enter key been pressed?
            if ( (window.e ? e.keyCode : e.which) == 13) { 
                // If it has been so, manually submit the <form>
                //e.target.parentElement.submit();
                par=$('#'+e.target.parentElement.id);
                $.ajax({type:'post',url: '/userposts/'+par.data('id')+'/createcomment?'+par.serialize(),complete:function(){
                    $.ajax({url:'/lastcommentuserposts',success: function(data){$('.mynew'+par.data('id'))[0].outerHTML=(data);}});
                    e.target.value = "";
                }});
                  return false;
            }
        }
        function pressedupdate(e) {
            // Has the enter key been pressed?
            if ( (window.e ? e.keyCode : e.which) == 13) { 
                // If it has been so, manually submit the <form>
                //e.target.parentElement.submit();
                par=$('#'+e.target.parentElement.id);
                $.ajax({type:'post',url: '/userposts/'+par.data('id')+'/updatecomment/'+par.data('commentid')+'?'+par.serialize(),complete:function(){
                    $.ajax({url:'/userposts/'+par.data('id')+'/mycomment/'+par.data('commentid'),
                      success: function(data){$('.mynewuserpostcomment'+par.data('commentid'))[0].outerHTML=(data);}});
                    e.target.value = "";
                }});
                  return false;
            }
        }

</script>

</body></html>


